<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width initial-scale=1">

  <title>RabidAudio | The Color of Music</title>
  <meta name="description" content="After being inspired by a neat TED talk about a colorblind guy who wears a camera device that plays different audio frequencies based on the color he is look...">

  <link rel="stylesheet" href="/blog/css/main.css">
  <link rel="canonical" href="http://rabid.audio/blog/software/the-color-of-music/">
  <link rel="alternate" type="application/atom+xml" title="RabidAudio" href="http://rabid.audio/blog/feed.xml" />
  
  <style>
  
    
    /* No suitable color found:  */
  
  body {
    background-color: #ffffff;
  }
  pre, code {
    background-color: #ffffff;
    color: #000000;
  }
  @media screen and (max-width: 600px) {
    pre, code {
      background-color: #ffffff;
    }
  }
  h1, h2, h3, h4, h5 {
    color: #000000;
  }
  a {
    color: #424242;
  }
  a:visited {
    color: #000000;
  }
  blockquote {
    border-left: 4px solid #828282;
  }
  .site-header {
    border-top: 10px solid #424242;
    background-color: #fdfdfd;
  }
  .headshot {
    border: 2px solid #424242;
  }

  .bio {
    background-color: #ffffff;
  }
  a.read-more {
    color: #424242;
  }

  .post-list-container {
    background-color: #828282;
  }
  
    
    /* purple */
    .post-container--music {
      background-color: #97397B;
    }
  
    
    /* green */
    .post-container--policy {
      background-color: #72BA76;
    }
  
    
    /* red */
    .post-container--hardware {
      background-color: #DF2D4F;
    }
  
    
    /* blue */
    .post-container--software {
      background-color: #367FA3;
    }
  

  .post-tag { background-color: #626262 }
  
    
      .tag--genre { background-color: #630948}
    
      .tag--last-fm { background-color: #630948}
    
      .tag--music { background-color: #630948}
    
      .tag--new-music { background-color: #630948}
    
      .tag--riaa { background-color: #630948}
    
      .tag--car-audio { background-color: #630948}
    
      .tag--bass { background-color: #630948}
    
      .tag--effects { background-color: #630948}
    
  
    
      .tag--free-software-movement { background-color: #16831C}
    
      .tag--piracy { background-color: #16831C}
    
      .tag--soapbox { background-color: #16831C}
    
      .tag--tech-policy { background-color: #16831C}
    
  
    
      .tag--computing { background-color: #0D5578}
    
      .tag--dsp { background-color: #0D5578}
    
      .tag--android { background-color: #0D5578}
    
      .tag--networking { background-color: #0D5578}
    
      .tag--server { background-color: #0D5578}
    
      .tag--software { background-color: #0D5578}
    
      .tag--web-development { background-color: #0D5578}
    
      .tag--windows { background-color: #0D5578}
    
      .tag--javascript { background-color: #0D5578}
    
      .tag--java { background-color: #0D5578}
    
  
    
      .tag--arduino { background-color: #BF0E30}
    
      .tag--bluetooth { background-color: #BF0E30}
    
      .tag--electronics { background-color: #BF0E30}
    
      .tag--wearables { background-color: #BF0E30}
    
      .tag--analog { background-color: #BF0E30}
    
      .tag--555-timer { background-color: #BF0E30}
    
      .tag--jfet { background-color: #BF0E30}
    
      .tag--triac { background-color: #BF0E30}
    
  
</style>

  <script type="text/javascript" src="/blog/assets/js/output.js"></script>
  

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-15955870-10', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
  </script>
</head>


  <body>

    <header class="site-header" id="top">
  <div class="wrapper">
    <a class="site-title" href="/blog/">
      <h1>RabidAudio</h1>
    </a>
    <nav class="site-nav">
      <a href="#" class="menu-icon"><i class="fa fa-list-ul"></i></a>
      <div class="trigger">
        
          
          <a class="page-link" href="/blog/all" name="all-posts">All Posts</a>
          
        
      </div>
    </nav>
  </div>
</header>


    <div class="page-content">
      <div class="wrapper">
         <script type="txt/template" id="blogger-notice">
  <span style="font-weight: bold;">Note: This post predates my current blog and was imported from Blogger.</span><br/>
  There may be some style issues. You can view the orginal
  <a href=http://rabidaudio.blogspot.com/2012/11/the-color-of-music.html>here</a>.
</script>

<script>
$(document).ready(function(){
  $(window).scroll(function(){
    if( $(window).scrollTop() > $('.post').offset().top ){
      $.inform($("#blogger-notice").html(), { effect: "slide" });
      $(window).off('scroll');
    }
  });
});
</script> 
<div class="post">
  <header class="post-header">
    <h1 class="post-title">The Color of Music</h1>
    <h3 class="post-subtitle"></h3>
    <div class="post-meta">
      
      <div>
        <a href="/blog/software/the-color-of-music/" class="date" date="Wed, 28 Nov 2012 23:23:00 -0500" title="Nov 28, 2012, 23:23">
          Nov 28, 2012
        </a>
         by <a href="mailto:cjk@rabidaudio.com" class="author">Charles Julian Knight</a>
        
      </div>
    </div>
      <div class="bio-float-right">
        <div class="bio">
  <div>
    <span class="name">Charles Julian Knight</span>
  </div>
  <div class="holder">
    
    <div class="leftcol">
      <div class="headshot">
        <img src="http://www.gravatar.com/avatar/e3f99640d60577f72086b54087423593.png?s=200" alt="Charles Julian Knight">
      </div>
    </div>
    

    <div class="rightcol">
      <span class="minibio"></span>
      <div class="info">
        <ul class="social-media-list">
  <!-- http://fortawesome.github.io/Font-Awesome/cheatsheet/ -->

  
  
  
    <!-- no op -->
  

  
  
  
    <!-- no op -->
  

  
  
  
    <li>
      <span class="icon  icon--school"><i class="fa fa-graduation-cap"></i></span>
      <span class="school" title="school">Georgia Tech</span>
    </li>
  

  
  
  
    <li>
      <a href="https://twitter.com/charlesjuliank" target="_blank">
        <span class="icon icon--twitter"><i class="fa fa-twitter"></i></span>
        <span class="username" title="twitter">charlesjuliank</span>
      </a>
    </li>
  

  
  
  
    <li>
      <a href="mailto:cjk@rabidaudio.com">
        <span class="icon icon--email"><i class="fa fa-envelope"></i></span>
        <span class="email" title="email">cjk@rabidaudio.com</span>
      </a>
    </li>
  

  
  
  
    <li>
      <a href="https://github.com/rabidaudio" target="_blank">
        <span class="icon  icon--github"><i class="fa fa-github"></i></span>
        <span class="username" title="github">rabidaudio</span>
      </a>
    </li>
  

  
  
  
    <li>
      <a href="https://last.fm/user/rabidaudio" target="_blank">
        <span class="icon  icon--lastfm"><i class="fa fa-lastfm-square"></i></span>
        <span class="lastfm" title="lastfm">rabidaudio</span>
      </a>
    </li>
  

  
  
  
    <li>
      <a href="https://plus.google.com/+CharlesJulianKnight" target="_blank">
        <span class="icon  icon--google"><i class="fa fa-google-plus"></i></span>
        <span class="google" title="google">CharlesJulianKnight</span>
      </a>
    </li>
  

  
  
  
    <li>
      <a href="http://https://www.linkedin.com/in/charlesjulianknight" target="_blank">
        <span class="icon  icon--linkedin"><i class="fa fa-linkedin"></i></span>
        <span class="linkedin" title="linkedin">LinkedIn Profile</span>
      </a>
    </li>
  



</ul>
      </div>
    </div>
  </div>
</div>

<script>
//TODO find a css-friendly solution
// $('.leftcol').css('max-width', Math.min.apply(null, $('.rightcol').map(function(){ return $(this).height() }) )+'px');

var $bio = $('.post-header .bio');
$('.author').click(function(e){
  e.stopPropagation();
  e.preventDefault();
  $bio.slideToggle();
});
$(document).click(function(e){
  if($bio.is(':visible') && !$(e.target).closest('.bio').length){
    e.stopPropagation();
    e.preventDefault();
    $bio.slideToggle();
  }
});
</script>
      </div>
  </header>

  <article class="post-content">
    After being inspired by a neat <a href="http://www.ted.com/talks/neil_harbisson_i_listen_to_color.html" target="_blank">TED talk about a colorblind guy</a> who wears a camera device that plays different audio frequencies based on the color he is looking at, allowing him to "see" (sense) color, as well as a neat talk at Berry from <a href="http://www.applesinstereo.com/" target="_blank">Robert&nbsp;Schneider</a>&nbsp;(no relation to <a href="http://www.imdb.com/name/nm0001705/" target="_blank">Rob&nbsp;Schneider</a>, it seems) about some of his math inspired music projects, I wanted to try and work backwards: turn sound into color.<br /><h4></h4><h4>Sound</h4>All sound waves are complex waveforms, which are really just a sum of normal&nbsp;sinusoidal waves. When you play middle C on any&nbsp;instrument, the sound you make is not a pure 261.63 Hz sine wave. There are overtones and so forth that also sound based on the shape and design of the instrument, giving the note its timbre. The brilliant Joseph Fourier (the bane of all undergrad EE students taking Intro to Signal Processing) did a lot of work with complex waveforms, eventually leading to a whole branch of mathematics called Fourier Analysis. The major part of this is the <a href="http://en.wikipedia.org/wiki/Fourier_transform" target="_blank">Discrete Fourier Transform</a>. Given a complex wave function f(x), solving the integral<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://upload.wikimedia.org/math/b/7/f/b7f1b12cde784b0cadb5d023179136ed.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://upload.wikimedia.org/math/b/7/f/b7f1b12cde784b0cadb5d023179136ed.png" /></a></div><div class="separator" style="clear: both; text-align: left;">results in a very interesting function which is able to pick out the component frequencies in the complex wave. Here is an example from <a href="http://www.mathworks.com/help/matlab/ref/fft.html" target="_blank">MathWorks</a>:</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://www.mathworks.com/help/matlab/ref/new_fft1.gif" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://www.mathworks.com/help/matlab/ref/new_fft1.gif" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><div style="text-align: left;">A small section of a wave which is the sum of a 120 Hz wave</div><div style="text-align: left;">with max&nbsp;amplitude 1, a 50 Hz wave with max amplitude .7,</div><div style="text-align: left;">and some random data added as noise.</div></td></tr></tbody></table><table cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://www.mathworks.com/help/matlab/ref/new_fft2.gif" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-left: auto; margin-right: auto;"><img border="0" height="240" src="http://www.mathworks.com/help/matlab/ref/new_fft2.gif" width="320" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;"><div style="text-align: left;">This is the result of the FFT. Notice the peak at 120 Hz with</div><div style="text-align: left;">height of about 1 and the peak at 50 Hz with a height of about</div><div style="text-align: left;">.7. The other peaks are the result of the random data. Notice</div><div style="text-align: left;">how we are able to pick out the components even in spite of</div><div style="text-align: left;">the added noise.</div></td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;">There are handy sets of computer algorithms called <a href="http://en.wikipedia.org/wiki/Fast_Fourier_transform" target="_blank">Fast Fourier Transforms (FFT)</a> which, as you might have guessed, are fast ways of approximating DFTs. The most popular example is <a href="http://www.fftw.org/" target="_blank">FFTW</a>, a C library which from what I understand, picks the best FFT algorithm based on the data given.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Here is a little example I did in MATLAB. I was able to&nbsp;determine&nbsp;the first note of the <a href="http://en.wikipedia.org/wiki/Hallelujah_Chorus#44" target="_blank">Hallelujah&nbsp;Chorus (Handel's <i>Messiah</i>)</a>, which is a sample file included with MATLAB:&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"></div><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">load <span style="color: purple;">handel.mat</span></span><br /><span style="font-family: Courier New, Courier, monospace;"><span style="color: #6aa84f; font-size: xx-small;">%The file is now stored in y</span></span><br /><span style="font-size: xx-small;"><span style="font-family: Courier New, Courier, monospace;">sound(y) <span style="color: #6aa84f;">%listen to it to make sure it works</span></span><span style="color: #6aa84f; font-family: Courier New, Courier, monospace;">%the sound function defaults to a sample rate of 8192 per second.</span></span><br /><span style="font-family: Courier New, Courier, monospace;"><span style="color: #6aa84f; font-size: xx-small;">% If we double it, we double the tempo and frequency (chipmonks)</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">sound(y,16384)</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">plot(y)<span style="color: #6aa84f;"> %this will show a graph of the waveform like you see in a music editing program</span></span><br /><span style="font-family: Courier New, Courier, monospace;"><span style="color: #6aa84f; font-size: xx-small;"><br /></span></span><span style="color: #6aa84f; font-family: Courier New, Courier, monospace; font-size: xx-small;">%Lets get just the first note ('HA-'). look at the plot. The section we</span><br /><span style="font-family: Courier New, Courier, monospace;"><span style="color: #6aa84f; font-size: xx-small;">%want is from about 1667 to about 5000, so let's define a new sound array a</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">a=y(1667:5000,1);</span><br /><span style="font-family: Courier New, Courier, monospace;"><span style="color: #6aa84f; font-size: xx-small;">%listen to see that it is just the first note</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">sound(a)</span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">plot(a)</span><br /><span style="color: #6aa84f; font-family: Courier New, Courier, monospace; font-size: xx-small;"><br /></span><span style="font-size: xx-small;"><span style="color: #6aa84f; font-family: Courier New, Courier, monospace;">%now we can find the FFT for a. The following is from the MATLAB guide for</span><span style="font-family: Courier New, Courier, monospace;"><span style="color: #6aa84f;">%the fft() function, using this data instead of theirs.</span></span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">Fs=8192; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #6aa84f;">%The sample frequency</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">T=1/Fs; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #6aa84f;">%Period=1/Frequency</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">L=size(a,1); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #6aa84f;">&nbsp;%the length of the signal</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">NFFT = 2^nextpow2(L); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #6aa84f;">%the next power of two after L</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">Y = fft(y,NFFT)/L; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #6aa84f;">%our FFT data</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">f = Fs/2*linspace(0,1,NFFT/2+1); &nbsp; &nbsp;<span style="color: #6aa84f;">%f is the set of frequencies for the x axis of the graph</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">p = 2*abs(Y(1:NFFT/2+1)); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: #6aa84f;">%p is the set of amplitudes for the y axis of the graph</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">plot(f,p); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #6aa84f;">%isn't it beautiful!?</span></span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;"><br /></span></span><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">%now, let's find out what note they are singing.</span></span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">%find(p==max(p)) will return a set of indexes in p of the maximum value of</span></span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">%p (which is the one we want, a little after 500 Hz). In this case, there is</span></span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">%only 1 occurence, so we can dump it streight into f, as the corresponding</span></span><br /><span style="font-family: Courier New, Courier, monospace;"><span style="color: #6aa84f; font-size: xx-small;">%freqency for this value is then the value of f at this index.</span></span><br /><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">f(find(p==max(p)))</span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">%this returns 572 Hz, which is very close to 577.33 Hz: D5. This leads us</span></span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">%to suspect the chorus opens with a D. If you look at the sheet music, it actually</span></span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace; font-size: xx-small;">%opens with an octave of D's: D5 and D6 (the song is in D Major). If you find the</span></span><br /><span style="color: #6aa84f;"><span style="font-family: Courier New, Courier, monospace;"><span style="font-size: xx-small;">%frequency for that other peak, you will find it is close to 1174.66 Hz, the frequency for D6.</span></span></span><br />The code above will generate the following graphs.<br /><div><table><tbody><tr><td><div style="text-align: left;"><br /></div></td><td><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://4.bp.blogspot.com/-X9D3ae2CsYw/ULbbV3CjB4I/AAAAAAAACEw/ocjHHwB45nQ/s1600/1note.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="150" src="http://4.bp.blogspot.com/-X9D3ae2CsYw/ULbbV3CjB4I/AAAAAAAACEw/ocjHHwB45nQ/s200/1note.jpg" width="200" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The first note of the sound clip</td></tr></tbody></table><div style="text-align: left;"></div></td><td><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://2.bp.blogspot.com/-KT_Va4qvZ8o/ULbbe2DgE-I/AAAAAAAACE4/cf582twMuGg/s1600/fft.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="150" src="http://2.bp.blogspot.com/-KT_Va4qvZ8o/ULbbe2DgE-I/AAAAAAAACE4/cf582twMuGg/s200/fft.jpg" width="200" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The FFT of the first note</td></tr></tbody></table></td></tr></tbody></table></div><h4><br /></h4><h4>Sound</h4><div class="separator" style="clear: both; text-align: left;"><a href="http://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Argon_discharge_tube.jpg/800px-Argon_discharge_tube.jpg" imageanchor="1" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img border="0" height="213" src="http://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Argon_discharge_tube.jpg/800px-Argon_discharge_tube.jpg" width="320" /></a>Visible light is also a complex wave. Shining light through a prism breaks the light into it's component parts. Spectral analysis of light will reveal it's component frequencies. This is an Argon tube lamp (which emits a purple-blue color) and its spectra.&nbsp;Notice the vertical lines in the purple, blue, and teal sections of the spectra graph are bright. The brightness corresponds to the intensity or&nbsp;amount&nbsp;of that particular frequency.&nbsp;</div><div class="separator" style="clear: both; text-align: left;"><a href="http://upload.wikimedia.org/wikipedia/commons/3/37/Argon_Spectrum.png" imageanchor="1" style="clear: right; display: inline !important; float: right; margin-bottom: 1em; margin-left: 1em; text-align: center;"><img border="0" height="26" src="http://upload.wikimedia.org/wikipedia/commons/3/37/Argon_Spectrum.png" width="320" /></a></div><h4><br /></h4><h4>Putting it together</h4><div class="" style="clear: both; text-align: left;">We have complex sound waves split into component frequencies (notes) and their relative intensities (volume), and complex light waves split into component frequencies (colors) and their relative intensities (brightness). If we shift and translate our sound data from the <a href="http://en.wikipedia.org/wiki/Hearing_range#Humans" target="_blank">human audio frequency range</a> (roughly 12 Hz to 20 KHz) to <a href="http://en.wikipedia.org/wiki/Visible_spectrum" target="_blank">human visual frequency range</a> (390-750 nm wavelengths at the speed of light equate to 400-790 THz; 1 THz = 1 trillion Hz).</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em; text-align: left;"><tbody><tr><td style="text-align: center;"><a href="http://www.fourmilab.ch/documents/specrend/ciegamut.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" height="400" src="http://www.fourmilab.ch/documents/specrend/ciegamut.jpg" width="375" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The triangle is the limits of the RGB system, and the "tongue" is the<br />full human visible spectrum in CIE coordinates.</td></tr></tbody></table>There is still another problem. All of our displays (TVs, LCD panels, even CRTs) use RGB values to&nbsp;determine&nbsp;color. Linear combinations of red, green, and blue will result in all the colors of the color wheel. However, our displays to not factor intensity into these. Believe it or not, the screen you are looking at now is not capable of producing every visible color. This graph is from <a href="http://www.fourmilab.ch/documents/specrend/" target="_blank">this amazingly useful site</a>, which also includes source code for converting RGB &lt;=&gt; CIE color data.<br /><div class="separator" style="clear: both; text-align: left;">CIE stands for the&nbsp;<a href="http://en.wikipedia.org/wiki/International_Commission_on_Illumination" target="_blank">International Commission on Illumination</a> (where you aware there was one!?), which defined the <a href="http://en.wikipedia.org/wiki/CIE_1931_color_space" target="_blank">CIE X Y Z color space</a>. My knowledge on this is pretty limited. From <a href="http://en.wikipedia.org/wiki/CIE_1931_color_space" target="_blank">Wikipedia</a>:</div><blockquote class="tr_bq"><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">The&nbsp;</span><a href="http://en.wikipedia.org/wiki/Human_eye" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Human eye">human eye</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;has photoreceptors (called&nbsp;</span><a href="http://en.wikipedia.org/wiki/Cone_cell" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Cone cell">cone cells</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">) for medium- and high-brightness color vision, with sensitivity peaks in short (</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">S</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">, 420–440&nbsp;nm), middle (</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">M</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">, 530–540&nbsp;nm), and long (</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">L</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">, 560–580&nbsp;nm) wavelengths...&nbsp;</span><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">These&nbsp;</span><b style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">tristimulus values</b><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;of a color can be conceptualized as the amounts of three&nbsp;</span><a href="http://en.wikipedia.org/wiki/Primary_color" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Primary color">primary colors</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;in a tri-chromatic&nbsp;</span><a href="http://en.wikipedia.org/wiki/Additive_color" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Additive color">additive</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;</span><a href="http://en.wikipedia.org/wiki/Color_model" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Color model">color model</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">.</span>&nbsp;</blockquote><blockquote class="tr_bq"><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">In this model, Y means&nbsp;</span><a href="http://en.wikipedia.org/wiki/Luminance" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Luminance">luminance</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">, Z is quasi-equal to blue stimulation, or the S cone response, and X is a mix (a linear combination) of cone response curves chosen to be nonnegative. Thus, XYZ may be confused with LMS cone responses. But in the CIE XYZ color space, the tristimulus values are not the&nbsp;</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">L</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">,&nbsp;</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">M</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">, and&nbsp;</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">S</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;responses of the human eye, even if&nbsp;</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">X</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;and&nbsp;</span><i style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">Z</i><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;are roughly&nbsp;</span><a href="http://en.wikipedia.org/wiki/Red" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Red">red</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">&nbsp;and&nbsp;</span><a href="http://en.wikipedia.org/wiki/Blue" style="background-color: white; background-image: none; color: #0b0080; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px; text-decoration: initial;" title="Blue">blue</a><span style="background-color: white; font-family: sans-serif; font-size: 13px; line-height: 19.200000762939453px;">. Rather, they may be thought of as 'derived' parameters from the long-, medium-, and short-wavelength cones.</span></blockquote><div class="separator" style="clear: both; text-align: left;">While I still don't completely understand the coordinate system, the conversion article is quite good at explaining how to normalize color values not covered by RGB coordinates to something RGB can handle (see the section called "Unrepresentable&nbsp;Colors").</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">The good news is that this project can be done with two existing C libraries. I will work on actually getting this to work, and hopefully have a graph of a song's color over time. Eventually, I would like to make a device with a microphone and a cheap LCD that displays the color of whatever it is hearing. That is a much harder problem. First, you have to sample to have a wave function to do a FFT on. That means it will have to record a brief snippet of sound and chug through a bunch of math before displaying a color. Google searches suggest <a href="https://forum.sparkfun.com/viewtopic.php?t=13979" target="_blank">people have been able to write watered-down FFT algorithms that will run on 8MHz atmegas</a>, so it might be possible for Arduino, but the processing time might be too high for a&nbsp;reasonably&nbsp;small sample time. I would settle for 3 samples per second, and be happy with 30 (a common framerate). 100 samples per second would be ideal. If an Arduino couldn't handle this, I'm sure my RPi (which, being an ARM processor, is 32 bit and has support for floats, unlike the atmegas) can.</div>
  </article>

  <div class="dinkus">
  <a href="#top">
    
      <i class="fa   fa-caret-up"></i>
    
      <i class="fa   fa-caret-up"></i>
    
      <i class="fa   fa-caret-up"></i>
    
  </a>
</div>

  <div class="post-nav">
    <div class="prev"><a href="/blog/software/microsofts-impending-software/">
      Previous: A Letter to Steve Balmer
    </a></div>
    <div class="next"><a href="/blog/software/circular-buffer-algorithm-rates-on/">
      Next: Circular buffer
    </a></div>
  </div>

</div>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <p class="text description">Thoughts on music, technology, policy, startups, and anything else.
</p>
    
    <ul class="social-media-list">
  <!-- http://fortawesome.github.io/Font-Awesome/cheatsheet/ -->

  
  
  
    <li>
      <a href="https://twitter.com/rabidaudio" target="_blank">
        <span class="icon icon--twitter"><i class="fa fa-twitter"></i></span>
        <span class="username" title="twitter">rabidaudio</span>
      </a>
    </li>
  

  
  
  
    <li>
      <a href="https://github.com/rabidaudio/rabid.audio" target="_blank">
        <span class="icon  icon--github"><i class="fa fa-github"></i></span>
        <span class="username" title="github">rabidaudio/rabid.audio</span>
      </a>
    </li>
  



  <li>
    <a href="/blog/feed.xml">
      <span class="icon icon--rss"><i class="fa fa-rss-square"></i></span>
      <span class="feed">RSS/Atom Link</span>
    </a>
  </li>

</ul>
    <div class="licence">
      <!-- <p> -->
        <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><div class="creative-commons" title="The content of this blog is hereby licensed under CC-BY-SA 4.0 unless otherwise specified.">
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">
  <g transform="matrix(0.01777778,0,0,0.01777778,-0.8888817,-0.8780946)" style="fill:#828282;fill-opacity:1">
    <g transform="matrix(24.992544,0,0,24.989748,-11260.201,1892.0941)" style="fill:#828282;fill-opacity:1">
      <g transform="translate(-289.6157,99.0653)" style="fill:#828282;fill-opacity:1">
        <path d="m 772.94165,-167.5741 c 3.48486,3.48541 5.22778,7.75336 5.22778,12.80219 0,5.04938 -1.71277,9.27203 -5.13831,12.66794 -3.63586,3.57602 -7.93176,5.36374 -12.89001,5.36374 -4.89783,0 -9.11987,-1.77264 -12.66394,-5.31955 -3.54639,-3.54526 -5.31848,-7.78244 -5.31848,-12.71213 0,-4.92859 1.77209,-9.19598 5.31848,-12.80219 3.45459,-3.48651 7.67664,-5.22949 12.66394,-5.22949 5.04883,0 9.31458,1.74298 12.80054,5.22949 z m -23.11853,2.34485 c -2.94678,2.97638 -4.42017,6.46289 -4.42017,10.46179 0,3.9989 1.45886,7.45581 4.37427,10.37122 2.9176,2.9165 6.38904,4.37476 10.4176,4.37476 4.02856,0 7.53015,-1.47281 10.50708,-4.41895 2.82593,-2.73645 4.23889,-6.17767 4.23889,-10.32703 0,-4.11749 -1.4364,-7.61292 -4.30823,-10.48419 -2.87061,-2.87061 -6.34985,-4.30652 -10.43774,-4.30652 -4.08789,0 -7.54699,1.44318 -10.3717,4.32892 z m 7.75391,8.70319 c -0.44971,-0.98169 -1.12317,-1.47284 -2.02271,-1.47284 -1.58862,0 -2.38293,1.07007 -2.38293,3.20911 0,2.13953 0.79431,3.2085 2.38293,3.2085 1.04944,0 1.79895,-0.52075 2.24866,-1.56458 l 2.20276,1.17303 c -1.05042,1.86548 -2.62561,2.79901 -4.72546,2.79901 -1.62,0 -2.91772,-0.4967 -3.89209,-1.48956 -0.97546,-0.99341 -1.46326,-2.36334 -1.46326,-4.10852 0,-1.71503 0.50342,-3.07654 1.50806,-4.08502 1.00452,-1.00854 2.25757,-1.51257 3.75781,-1.51257 2.22058,0 3.8092,0.87488 4.77136,2.62286 l -2.38513,1.22058 z m 10.36389,0 c -0.45081,-0.98169 -1.11206,-1.47284 -1.98242,-1.47284 -1.62097,0 -2.43213,1.07007 -2.43213,3.20911 0,2.13953 0.81116,3.2085 2.43213,3.2085 1.05164,0 1.78772,-0.52075 2.20728,-1.56458 l 2.25195,1.17303 c -1.04822,1.86548 -2.62109,2.79901 -4.71765,2.79901 -1.61768,0 -2.91199,-0.4967 -3.88647,-1.48956 -0.97217,-0.99341 -1.45996,-2.36334 -1.45996,-4.10852 0,-1.71503 0.49451,-3.07654 1.48352,-4.08502 0.98779,-1.00854 2.24524,-1.51257 3.77344,-1.51257 2.21619,0 3.80371,0.87488 4.76135,2.62286 l -2.43104,1.22058 z"
           style="fill:#828282;fill-opacity:1" />
      </g>
    </g>
  </g>
</svg>

  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">
  <g transform="matrix(0.01777778,0,0,0.01777778,-0.88889649,-0.88961538)" style="fill:#828282;fill-opacity:1">
    <g transform="matrix(38.565517,0,0,38.561202,-18471.673,-2970.273)" style="fill:#828282;fill-opacity:1">
      <g style="fill:#828282;fill-opacity:1">
        <path d="m 495.07373,87.10498 c 0,-0.4165 -0.33789,-0.75391 -0.75391,-0.75391 l -4.77246,0 c -0.41602,0 -0.75391,0.3374 -0.75391,0.75391 l 0,4.77295 1.33105,0 0,5.65186 3.61719,0 0,-5.65186 1.33203,0 0,-4.77295 1e-5,0 z" style="fill:#828282;fill-opacity:1" />
        <circle cx="491.93359" cy="84.090332" r="1.63232" style="fill:#828282;fill-opacity:1" />
      </g>
      <path d="m 491.91846,78.3252 c -3.23145,0 -5.96777,1.12793 -8.20703,3.38379 -2.29785,2.3335 -3.44629,5.0957 -3.44629,8.28467 0,3.18897 1.14844,5.93164 3.44629,8.22705 2.29785,2.29395 5.03418,3.44189 8.20703,3.44189 3.21289,0 5.99805,-1.15674 8.35449,-3.47168 2.21973,-2.19727 3.3291,-4.92969 3.3291,-8.19727 0,-3.26758 -1.12891,-6.02881 -3.3877,-8.28467 -2.25879,-2.25586 -5.02343,-3.38378 -8.29589,-3.38378 z m 0.0303,2.0996 c 2.64844,0 4.89648,0.93408 6.74609,2.80127 1.87012,1.84717 2.80469,4.10352 2.80469,6.76758 0,2.68359 -0.91504,4.91064 -2.74609,6.68066 -1.92773,1.90576 -4.19629,2.8584 -6.80469,2.8584 -2.61035,0 -4.85938,-0.94287 -6.74805,-2.82959 -1.88867,-1.88623 -2.83301,-4.12256 -2.83301,-6.70947 0,-2.58691 0.9541,-4.84229 2.8623,-6.76758 1.83107,-1.86718 4.07032,-2.80127 6.71876,-2.80127 z" style="fill:#828282;fill-opacity:1" />
    </g>
  </g>
</svg>

  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">
  <g transform="matrix(0.01777754,0,0,0.01777754,-0.88887421,-0.88977181)" style="fill:#828282;fill-opacity:1">
    <g transform="matrix(24.102232,0,0,24.099535,-14622.6,9250.9195)" style="fill:#828282;fill-opacity:1">
      <g transform="translate(-23.9521,-89.72962)" style="fill:#828282;fill-opacity:1">
        <path d="m 651.36426,-292.05655 c -5.17188,0 -9.55005,1.80548 -13.13135,5.41333 -3.67651,3.73444 -5.51562,8.15399 -5.51562,13.25714 0,5.10315 1.83911,9.48993 5.51562,13.1626 3.67505,3.67194 8.05322,5.50787 13.13135,5.50787 5.14075,0 9.59546,-1.85236 13.36572,-5.55396 3.55164,-3.51721 5.32825,-7.88916 5.32825,-13.11652 0,-5.22742 -1.80627,-9.64697 -5.422,-13.25714 -3.61401,-3.60784 -8.03748,-5.41332 -13.27197,-5.41332 z m 0.0469,3.36096 c 4.23755,0 7.83447,1.49298 10.79541,4.48132 2.99072,2.95544 4.48596,6.56329 4.48596,10.82819 0,4.29376 -1.46399,7.85632 -4.3938,10.68994 -3.08276,3.04846 -6.71411,4.57269 -10.88757,4.57269 -4.17505,0 -7.77344,-1.5094 -10.79541,-4.5274 -3.02185,-3.01874 -4.53284,-6.59613 -4.53284,-10.73523 0,-4.1391 1.52502,-7.74847 4.57971,-10.82819 2.92823,-2.98834 6.51099,-4.48132 10.74854,-4.48132 z" style="fill:#828282;fill-opacity:1" />
        <path d="m 643.08923,-276.02048 c 0.74377,-4.69849 4.05005,-7.20941 8.19543,-7.20941 5.95935,0 9.59216,4.32501 9.59216,10.09222 0,5.62817 -3.8656,9.99854 -9.68604,9.99854 -4.00464,0 -7.59058,-2.46332 -8.24219,-7.30084 l 4.70312,0 c 0.14062,2.51099 1.77039,3.39532 4.09851,3.39532 2.6532,0 4.37659,-2.46484 4.37659,-6.23206 0,-3.95471 -1.48901,-6.04614 -4.28442,-6.04614 -2.04846,0 -3.81726,0.74451 -4.19067,3.30237 l 1.36719,-0.009 -3.70154,3.70319 -3.70166,-3.70319 1.47352,0.009 z" style="fill:#828282;fill-opacity:1" />
      </g>
    </g>
  </g>
</svg>

</div></a>
      <!-- </p> -->
    </div>
  </div>
</footer>

  </body>

</html>
